@page
@model NorthwindApp.Pages.CustomersPages.DetailsModel

@{
    ViewData["Title"] = @Model.Customer.CompanyName;
}
<div class="container-sm widget text-center mt-5 mx-auto shadow-info" style="max-width:30em;">

        @if (TempData["Success"] == null)
        {                
            <div class="row col-auto">
                <div class="py-3">
                    <div class="alert alert-success alert-dismissible fade show text-start shadow" role="alert">
                        <strong>@Model.Customer.CompanyName</strong> Success!
                        <button type="button" id="liveToastBtn" class="btn-close text-center p-0" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>                
                </div>
            </div>
        }   
                <div class="card-title">
                    <h3>@ViewData["Title"]</h3>
                </div> 
                <hr />

    <div class="row">
        <dl class="row justify-content-evenly mx-auto">
            <dt class="col-lg-4 col-md-5 col-sm-6 text-center text-lg-start text-md-center text-sm-center">
                @Html.DisplayNameFor(model => model.Customer.CompanyName)
            </dt>
            <dd class="col-sm-6 text-center text-sm-start">
                @Html.DisplayFor(model => model.Customer.CompanyName)
            </dd>
            <dt class="col-lg-4 col-md-5 col-sm-6 text-center text-lg-start text-md-center text-sm-center">
                @Html.DisplayNameFor(model => model.Customer.ContactName)
            </dt>
            <dd class="col-sm-6 text-center text-sm-start">
                @Html.DisplayFor(model => model.Customer.ContactName)
            </dd>
            <dt class="col-lg-4 col-md-5 col-sm-6 text-center text-lg-start text-md-center text-sm-center">
                @Html.DisplayNameFor(model => model.Customer.ContactTitle)
            </dt>
            <dd class="col-sm-6 text-center text-sm-start">
                @Html.DisplayFor(model => model.Customer.ContactTitle)
            </dd>
            <dt class="col-lg-4 col-md-5 col-sm-6 text-center text-lg-start text-md-center text-sm-center">
                @Html.DisplayNameFor(model => model.Customer.Address)
            </dt>
            <dd class="col-sm-6 text-center text-sm-start">
                @Html.DisplayFor(model => model.Customer.Address)
            </dd>
            <dt class="col-lg-4 col-md-5 col-sm-6 text-center text-lg-start text-md-center text-sm-center">
                @Html.DisplayNameFor(model => model.Customer.City)
            </dt>
            <dd class="col-sm-6 text-center text-sm-start">
                @Html.DisplayFor(model => model.Customer.City)
            </dd>
            <dt class="col-lg-4 col-md-5 col-sm-6 text-center text-lg-start text-md-center text-sm-center">
                @Html.DisplayNameFor(model => model.Customer.Region)
            </dt>
            <dd class="col-sm-6 text-center text-sm-start">
                @Html.DisplayFor(model => model.Customer.Region)
                @if(Model.Customer.Region == null)
                {
                    <p class="text-center align-middle m-0 p-0 col-sm-6 text-center text-sm-start"> / </p>
                }
            </dd>
            <dt class="col-lg-4 col-md-5 col-sm-6 text-center text-lg-start text-md-center text-sm-center">
                @Html.DisplayNameFor(model => model.Customer.PostalCode)
            </dt>
            <dd class="col-sm-6 text-center text-sm-start">
                @Html.DisplayFor(model => model.Customer.PostalCode)
            </dd>
            <dt class="col-lg-4 col-md-5 col-sm-6 text-center text-lg-start text-md-center text-sm-center">
                @Html.DisplayNameFor(model => model.Customer.Country)
            </dt>
            <dd class="col-sm-6 text-center text-sm-start">
                @Html.DisplayFor(model => model.Customer.Country)
            </dd>
            <dt class="col-lg-4 col-md-5 col-sm-6 text-center text-lg-start text-md-center text-sm-center">
                @Html.DisplayNameFor(model => model.Customer.Phone)
            </dt>
            <dd class="col-sm-6 text-center text-sm-start">
                @Html.DisplayFor(model => model.Customer.Phone)
            </dd>
            <dt class="col-lg-4 col-md-5 col-sm-6 text-center text-lg-start text-md-center text-sm-center">
                @Html.DisplayNameFor(model => model.Customer.Fax)
            </dt>
            <dd class="col-sm-6 text-center text-sm-start">
                @Html.DisplayFor(model => model.Customer.Fax)
                @if (Model.Customer.Fax == null)
                {
                    <p class="text-center align-middle m-0 p-0 col-sm-6 text-center text-sm-start"> /</p>
                }
            </dd>


            <dt class="col-lg-4 col-md-5 col-sm-6 text-center text-lg-start text-md-center text-sm-center">
                @Html.DisplayNameFor(model => model.Customer.Orders)
            </dt>

            <dd class="col-sm-6 text-center text-sm-start">
                @Html.DisplayFor(model => model.Customer.Orders.Count)
            </dd>   
           
        </dl>

        <hr />
       

        <table class="table-sm table-hover table-striped table-borderless bg-transparent">
            <thead >                
                <tr class="col-lg-4 col-md-5 col-sm-6 text-center text-lg-start text-md-center text-sm-center">
                    <th class="col-lg-6 col-md-5 col-sm-6 text-center text-md-center text-sm-center">Order Id</th>
                    <th class="col-lg-6 col-md-5 col-sm-6 text-center text-md-center text-sm-center">Ordered</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.Customer.Orders.ToList())
                {
                    <tr class="text-center text-secondary align-middle small">
                        <td><a asp-page="/OrderPages/Details" asp-route-id="@item.OrderID">@item.OrderID</a></td>
                        <td>@Html.Raw(String.Format(" {0:dd.MM.yyyy}", @item.OrderDate))</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <hr />

    <div class="mx-auto row justify-content-evenly py-3 justify-content-md-evenly  justify-content-lg-evenly">
        <a asp-page="./Index" class="btn btn-sm btn-outline-success shadow float-start rounded-4 col-2">Back</a>
        <a asp-page="./Edit" asp-route-id="@Model.Customer.CustomerID" class="btn btn-sm btn-outline-primary rounded-4 float-center col-2">Edit</a>
        <a asp-page="./Delete" asp-route-id="@Model.Customer.CustomerID" class="btn btn-sm btn-outline-danger rounded-4 float-end col-3 ">Delete</a>
    </div>
</div>


@section Scripts {
    @{  
        await Html.RenderPartialAsync("_ValidationScriptsPartial");

        <div class="toast-container position-fixed top-0 end-0 p-3 mb-2 ">
            <div id="liveToast" class="toast bg-danger-subtle text-danger-emphasis" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="toast-header ">
                    <img src="~/profile-pic/avatar_11.png" class="rounded me-2 h-25 w-25 rounded-circle" alt="...">
                    <strong class="me-auto">Rados</strong>
                    <small>11 mins ago</small>
                    <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                </div>
                <div class="toast-body">
                    Hello, samo da vas pozdravim! :)
                </div>
            </div>
        </div>
    }

    <script>
        
        const toastTrigger = document.getElementById('liveToastBtn')
        const toastLiveExample = document.getElementById('liveToast')

        if (toastTrigger) {
            const toastBootstrap = bootstrap.Toast.getOrCreateInstance(toastLiveExample)
            toastTrigger.addEventListener('click', () => {
                toastBootstrap.show()
          });
        };


    </script>



}
<style>

    button {
        margin: 25px 5px 20px 20px;
    }

    .e-plus-icon::before {
        content: '\e823';
    }


</style>